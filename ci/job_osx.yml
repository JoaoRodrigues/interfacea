 jobs:
    - job:
      workspace:
          clean: all

      displayName: OSX
      pool:
        vmImage: 'macOS-10.13'

      strategy:
        matrix:
          Python36:
            python.version: '3.6'
          Python37:
            python.version: '3.7'
          # Python38:
          #   python.version: '3.8'

      steps:
      - bash: echo "##vso[task.prependpath]$CONDA/bin"
        displayName: Add Conda to PATH

      - bash: sudo chown -R $USER $CONDA
        displayName: Take ownership of conda installation

      - template: devtools/setup_conda.yml

      - bash: |
          source activate $(condaEnvName)
          conda list
        displayName: Check Environment
        continueOnError: false

      - script: |
          source activate $(condaEnvName)
          python setup.py build
          python setup.py install
        displayName: Build & Install
        continueOnError: false

      - script: |
          conda env remove -n $(condaEnvName)
        displayName: Manual Paranoid Cleanup
